# ZED 深度数据作为障碍物层 - 轮式机器人安全配置（_xu 独立文件，不修改原配置）
# 将 ZED 点云直接作为 ObstacleLayer 输入，InflationLayer 自动完成障碍物膨胀
# 若相机名为 zed（非 zed2i），请将 zed_cloud 的 topic 改为 /zed/zed_node/point_cloud/cloud_registered，
# sensor_frame 改为 zed_left_camera_frame

# 机器人轮廓（与 base_link 一致）
# 这些全局参数不需要放在 obstacle_layer 下
footprint: [[-0.275,-0.15], [-0.275,0.15], [0.15, 0.2], [0.15, -0.2]]
map_type: costmap

# 障碍物层参数配置
obstacle_layer:
  obstacle_range: 2.5
  raytrace_range: 3.0
  observation_sources: zed_cloud
  
  zed_cloud:
    sensor_frame: zed2i_left_camera_frame
    data_type: PointCloud2
    topic: /zed2i/zed_node/point_cloud/cloud_registered
    marking: true
    clearing: true
    min_obstacle_height: 0.0   # 过滤地面以下噪声
    max_obstacle_height: 3.0   # 轮式机器人视野内障碍物高度
    obstacle_range: 5.0
    raytrace_range: 6.0
    observation_persistence: 0.2
    expected_update_rate: 10.0

# 膨胀层参数配置
inflation_layer:
  inflation_radius: 0.25
  cost_scaling_factor: 3.0
